<html>

<head>
    <title>Delta Meet</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-csg-meshs/index.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-supercraft-loader@1.1.3/dist/aframe-supercraft-loader.js"></script> -->
    </a-scene>
    <meta name="apple-mobile-web-app-capable" />
    
</head>

<body>
    <h1 class="title">Delta Meet</h1>
    <p id="notification" hidden></p>
    <div class="entry-modal" id="entry-modal">
        <p>Create or Join Meeting</p>
        <input value="1" id="room-input" class="room-input" placeholder="Enter Room ID">
        <div>
            <button onclick="createRoom()">Create Room</button>
            <button onclick="joinRoom()">Join Room</button>
        </div>
    </div>
    <div class="meet-area">
        <!-- Remote Video Element-->
        <video id="remote-video" style="display: none;"></video>

        <!-- Local Video Element-->
        <video id="local-video" style="display: none;"></video>
        <div class="meet-controls-bar">
            <button onclick="startScreenShare()">Screen Share</button>
        </div>
    </div>


    <p>





        <a-scene inspector="https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">
            <a-entity id="rig" position="0 4 0">

                <a-camera id="cam" look-controls>
                    <a-cursor color="orange" fuse="true" fuseduration = "1500"  />
                   
                </a-camera>
            </a-entity>

            <!-- <a-curvedimage id="panandzoom" position="0 2.75 3.2" src="image1.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="0 1.7 3.2" src="image2.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="2 1.7 3.2" rotation="0 0 0" src="image1.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="-2 1.7 3.2" rotation="0 0 0" src="image1.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="0 0.65 3.2" src="image2.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage> -->
<!-- 
            <a-entity id="rig" position="0 0 0">
                <a-entity camera="active: true" position="0 1.6 0" wasd-controls="" rotation="" look-controls=""
                    aframe-injected="" data-aframe-inspector-original-camera="" visible=""></a-entity>
                <a-entity camera="fov: 120; zoom: 3.42" position="0 0 0" rotation="" active="true"></a-entity>
                <a-entity camera="fov: 120; zoom: 3.42; active: false" position="2.41 1.72 0" rotation=""></a-entity>
                <a-entity camera="fov: 120; zoom: 3.42; active: false; wasd-controls: true; look-controls: true"
                    position="0.41 1.72 0" rotation=""></a-entity>

            </a-entity> -->
            <!-- <a-curvedimage mousecontrol id="panandzoom" position="0 2.75 3.2" src="#remote-video" height="1.027"
            radius="5" theta-length="25=0" theta-start="165"></a-curvedimage> -->
        <a-curvedimage position="0 1.7 3.2" src="#remote-video" height="1.027" radius="5"
            theta-length="25=0" theta-start="165"></a-curvedimage>
        <!-- <a-curvedimage position="2 1.7 3.2" src="#remote-video" height="1.027" radius="5"
            theta-length="25=0" theta-start="165"></a-curvedimage>
        <a-curvedimage position="-2.5 1.7 3.2" rotation="0 0 0" src="#remote-video" height="1.027" radius="5"
            theta-length="25=0" theta-start="165"></a-curvedimage>
        <a-curvedimage position="0 0.65 3.2" src="#remote-video" height="1.027" radius="5"
            theta-length="25=0" theta-start="165"></a-curvedimage> -->


            <!-- <a-box src="image1.png" scale="2 2 2" position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"
                scale="1.5 1 1"></a-box> -->
            <!-- <a-cylinder position="1 0.75 -3" radius="1" segment height="1.5" color="#FFC65D"></a-cylinder> -->
            <!-- <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder> -->
            <a-plane src="image1.png" position="0 0 -4" rotation="-90 0 0" width="4" height="42" color="#7BC8A4">
            </a-plane>
            <a-sky color="#ECECEC"></a-sky>
        </a-scene>
    </p>
</body>

<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
<script src="script.js"></script>
<script src='https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js'></script>
<script>

    var rig = document.querySelector("#rig");

    window.addEventListener("wheel", function (event) {
        try {
            console.log(event)

let x = event.deltaX;
let y = event.deltaY;

let currentX = rig.getAttribute("position").x;
let currentY = rig.getAttribute("position").z;
console.log(`${x*0.1} ${y*0.1} 0`)
console.log("position", `${x*0.01 + currentX} ${y*0.01 + currentY} 0`)
rig.setAttribute("position", `${x*0.002 + currentX} 0 ${y*0.002 + currentY}`)
        }
        catch(e) {
            alert(e);
        }
      
    });
    // AFRAME.registerComponent('mousecontrol', {
    //     schema: {
    //         min: { type: "number", default: 5 },
    //         max: { type: "number", default: 120 }
    //     },
    //     init: function () {
    //         let self = this;
    //         let sceneEl = document.querySelector("a-scene");
    //         self.camera = sceneEl.querySelector("#cam");
    //         console.log(self)
    //         console.log('min: ', self.data.min);
    //         console.log('max: ', self.data.max);
    //         window.addEventListener("mousewheel", event => {
    //             console.log(event)
    //             let amount = Math.sign(event.deltaY) * 5;
    //             event.deltaY > 0 ? amount = -2 : amount = 2
    //             // amount = -5;
    //             let fov = Number(self.camera.getAttribute('camera').fov);
    //             let adjust = amount + fov;
    //             // alert(fov);
    //             if (adjust < self.data.min) { adjust = self.data.min; }
    //             if (adjust > self.data.max) { adjust = self.data.max; }
    //             self.camera.setAttribute('camera', 'fov', adjust);
    //         });
    //     }
    // });
</script>
<script>


</script>

</html>