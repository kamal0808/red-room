<html>

<head>
    <title>Delta Meet</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-csg-meshs/index.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-supercraft-loader@1.1.3/dist/aframe-supercraft-loader.js"></script> -->
    </a-scene>
    <meta name="apple-mobile-web-app-capable" />
    <script>
        AFRAME.registerComponent('zoom-controls', {
            schema: {
                min: { type: "number", default: 5 },
                max: { type: "number", default: 120 }
            },
            init: function () {
                let self = this;
                let sceneEl = document.querySelector("a-scene");
                self.camera = sceneEl.querySelector("#camera");
                console.log(self)
                console.log('min: ', self.data.min);
                console.log('max: ', self.data.max);
                // window.addEventListener("wheel", event => {
                //     console.log(event)
                //     // let amount = Math.sign(event.deltaY)*5 ;              
                //     event.deltaY > 0 ? amount = -2 : amount = 2
                //     // amount = -5;
                //     let fov = Number(self.camera.getAttribute('camera').fov);
                //     let adjust = amount + fov;
                //     if (adjust < self.data.min) { adjust = self.data.min; }
                //     if (adjust > self.data.max) { adjust = self.data.max; }
                //     self.camera.setAttribute('camera', 'fov', adjust);
                // });
            }
        });
    </script>
</head>

<body>
    <h1 class="title">Delta Meet</h1>
    <p id="notification" hidden></p>
    <div class="entry-modal" id="entry-modal">
        <p>Create or Join Meeting</p>
        <input id="room-input" class="room-input" placeholder="Enter Room ID">
        <div>
            <button onclick="createRoom()">Create Room</button>
            <button onclick="joinRoom()">Join Room</button>
        </div>
    </div>
    <div class="meet-area">
        <!-- Remote Video Element-->
        <video id="remote-video" style="display: none;"></video>

        <!-- Local Video Element-->
        <video id="local-video" style="display: none;"></video>
        <div class="meet-controls-bar">
            <button onclick="startScreenShare()">Screen Share</button>
        </div>
    </div>


    <p>





        <a-scene 
            inspector="https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">

            <!-- <a-entity supercraft-loader="name: icky-snake"></a-entity> -->
            <!-- <a-entity camera look-controls orbit-controls="target: 0 1.6 -0.5; minDistance: 0.5; maxDistance: 180; initialPosition: 0 5 15"></a-entity> -->


            <!-- <a-entity id="rig" position="0 3 -5">
                <a-entity id="camera" camera look-controls></a-entity>
              </a-entity> -->
            <!-- <a-entity id="rig" movement-controls position="25 0 25">
                <a-entity id="camera" camera="active: true" look-controls zoom-controls="min:5; max: 140" fov="100" position="0 0 0"></a-entity>    
                
            </a-entity> -->
            <!-- <a-entity id="camera" camera="active: true" look-controls zoom-controls="min:5; max: 140" fov="100" position="0 0 0"></a-entity>     -->
            <!-- <a-assets>
                    <a-asset-item id="cityModel" src="wide_monitor_model/scene.gltf"></a-asset-item>
                  </a-assets>
                  <a-entity position="-3.5 0.5 -3" rotation="20 30 0" gltf-model="#cityModel" modify-materials></a-entity>
                  <a-entity position="3.5 0.5 -3" rotation="20 -30 0" gltf-model="#cityModel" modify-materials></a-entity> -->
            <a-assets>
                <!-- <canvas id="myCanvas"></canvas> -->
                <!-- <video id="sphereVideo" src="./video.mp4" loop="true" autoplay="true" webkit-playsinline></video> -->

            </a-assets>

            <!-- <a-entity camera look-controls position="0 -12 0"></a-entity> -->
            <!-- <a-entity id="rig" position="0 5 12">
                <a-entity id="camera" camera="fov:80" look-controls></a-entity>
              </a-entity> -->
            <!-- <a-entity geometry="primitive: sphere; thetaLength: 180; radius: 5000; segmentsWidth: 64; segmentsHeight: 20" scale="1 1 -1" material="src: #myVideo; shader: flat"></a-entity> -->
            <!-- <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow csg-meshs="subtract: #sphere"></a-box> -->
            <!-- <a-videosphere src="#remote-video" webkit-playsinline></a-videosphere> -->
            <!-- <a-curvedimage zoom-controls src="#remote-video" position="0 0 0" rotation="60 0 0" height="64.125"
                radius="58" theta-length="112.6159" theta-start="123.6921"></a-curvedimage>
            <a-curvedimage src="#remote-video" position="0 0 0" rotation="0 0 0" height="64.125" radius="58"
                theta-length="112.6159" theta-start="123.6921"></a-curvedimage> -->

                <a-curvedimage position="0 2.75 3.2" src="#remote-video" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="0 1.7 3.2" src="#remote-video" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="2 1.7 3.2" src="#remote-video" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="-2 1.7 3.2" rotation="0 0 0" src="#remote-video" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
                <a-curvedimage position="0 0.65 3.2" src="#remote-video" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage>
            <!-- <a-curvedimage src="#remote-video" position="0 40 0" rotation="40 0 0"  height="64.125" radius="58" theta-length="112.6159" theta-start="123.6921"></a-curvedimage> -->
            <!-- <a-curvedimage src="#remote-video" height="38.0625" radius="58" theta-length="112.6159" theta-start="123.6921"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 2 0" src="image1.png" height="3.927" radius="4" theta-length="90" theta-start="90"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 1.7 3.2" src="image1.png" height="1.027" radius="5" theta-length="25=0" theta-start="165"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 2 0" src="image1.png" height="3.927" radius="4" theta-length="90" theta-start="270"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 2 0" src="image1.png" height="3.927" radius="4" theta-length="90" theta-start="360"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 2 0" src="#remote-video" height="3.927" radius="4" theta-length="90" theta-start="180"></a-curvedimage>
            <a-curvedimage position="0 2 0" src="#remote-video" height="3.927" radius="4" theta-length="90" theta-start="90"></a-curvedimage>
            <a-curvedimage position="0 2 0" src="#remote-video" height="3.927" radius="4" theta-length="90" theta-start="270"></a-curvedimage>
            <a-curvedimage position="0 2 0" src="#remote-video" height="3.927" radius="4" theta-length="90" theta-start="360"></a-curvedimage> -->
            <!-- <a-curvedimage position="0 2 0" src="image1.png" height="3.927" radius="6" theta-length="60" theta-start="180"></a-curvedimage> -->


            <!-- <a-curvedimage
                    src="#remote-video"
                    radius="2"
                    theta-length="30"
                    rotation="0 160 0"
                    >        
                </a-curvedimage> -->
            <!-- <a-sphere position="0 1.25 -5" theta-length="50" theta-start="4"   radius="3"  color="#EF2D5E"></a-sphere> -->
            <!-- <a-sphere geometry='thetaStart: 90; thetaLength: 45; psiLength: 45'></a-sphere> -->
            <!-- <a-box position="0 2 0" rotation="0 45 45" scale="2 2 2">
                    <a-sphere position="1 0 3"></a-sphere>
                  </a-box> -->
            <!-- <a-box color="red" position="0 2 -5" rotation="0 45 45" scale="2 2 2"></a-box> -->
            <!-- geometry: {
                    height: 1,
                    primitive: 'cylinder',
                    radius: 2,
                    segmentsRadial: 48,
                    thetaLength: 270,
                    openEnded: true,
                    thetaStart: 0
                  },
                  material: {
                    color: '#FFF',
                    shader: 'flat',
                    side: 'double',
                    transparent: true,
                    repeat: '-1 1'
                  } -->
            <!-- geometry="primitive:  sphere;  thetaLength:  40;  phiLength:  120;  phiStart:  180;  thetaStart:  40" -->
            <a-entity position="1 1.5 -3" src="#remote-video"
                geometry="primitive:  sphere;  thetaLength:  40;  phiLength:  120;  phiStart:  180;  thetaStart:  40"
                material=" side: back;"></a-entity>

 <!-- <a-sky color="#ECECEC"></a-sky>
       <a-entity position="5 5 5" rotation="10 0 0">
        <a-entity position="300 1.6 100" camera look-controls mouse-cursor>
          <a-cursor fuse="true" color="yellow"></a-cursor>
        </a-entity>
</a-entity> -->


            <!-- <a-box src="image1.png" scale="2 2 2" position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"
                scale="1.5 1 1"></a-box> -->
            <!-- <a-cylinder position="1 0.75 -3" radius="1" segment height="1.5" color="#FFC65D"></a-cylinder> -->
            <!-- <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder> -->
            <a-plane src="image1.png" position="0 0 -4" rotation="-90 0 0" width="4" height="42" color="#7BC8A4">
            </a-plane>
            <a-sky color="#ECECEC"></a-sky>
        </a-scene>
    </p>
</body>

<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
<script src="script.js"></script>

<script>

data =[];
data_pos = [];
for(var i=0;i<20;i++){
	
  data[i] = Math.floor((Math.random() * 10) + 1);
}

var scene = d3.select("a-scene")
var spheres = scene.selectAll("a-sphere").data(data)
  .enter()
	.append('a-sphere')
  .attr('color', 'yellow')
  .attr('scale', function (d, i) {
  		return d + " " + d + " " + d;
    })
  .attr('position', function(d,i) {
    
        var x =  i * 30;
     		var y = 0;
     		var z = -300;
        data_pos[i] = {"x": x, "y": y, "z": z};
        return x+" "+y+" "+z;

      });
   
      d3.select('a-scene')
          .on("wheel", function (d,i) {
          		d3.select('a-scene').select('a-box').transition()
  									 .duration(2000)
      							 .attr('color',"red")
                     .attrTween("position", function(d,i) {
                     var currentPosition = d3.select(this).attr("position");
                     return d3.interpolate(currentPosition, {"x":0, "y":  0, "z": 0});
                   });
                  
          }); 
  
  

</script>

</html>